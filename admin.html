<!DOCTYPE html>
<html lang="zh-CN" class="dark-theme">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Xpat - ÁÆ°ÁêÜÂêéÂè∞</title>
    <link rel="stylesheet" href="css/style.css?v=1.3">
    <link rel="stylesheet" href="css/dark-theme.css?v=1.3">
    <link rel="stylesheet" href="css/light-theme.css?v=1.3">
    <link rel="stylesheet" href="css/admin.css?v=1.0">
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAyOCAyOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQgMkM3LjM3MyAyIDIgNy4zNzMgMiAxNEMyIDIwLjYyNyA3LjM3MyAyNiAxNCAyNkMyMC42MjcgMjYgMjYgMjAuNjI3IDI2IDE0QzI2IDcuMzczIDIwLjYyNyAyIDE0IDJaTTE0IDVDMTguNDE4IDUgMjIgOC41ODIgMjIgMTNDMjIgMTcuNDE4IDE4LjQxOCAyMSAxNCAyMUM5LjU4MiAyMSA2IDE3LjQxOCA2IDEzQzYgOC41ODIgOS41ODIgNSAxNCA1WiIgZmlsbD0iIzU4NjVmMiIvPjwvc3ZnPg==" type="image/svg+xml">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <style>
        /* APIÂØÜÈí•ÁÆ°ÁêÜÊ†∑Âºè */
        .api-keys-container {
            border-radius: 5px;
            background-color: #f8f9fa;
            padding: 15px;
            margin-top: 10px;
        }
        
        .api-keys-list {
            margin-bottom: 10px;
        }
        
        .api-keys-table {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .api-key-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #ccc;
            background-color: #fff;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
        }
        
        .api-key-item.active {
            border-left-color: #28a745;
        }
        
        .api-key-item.inactive {
            border-left-color: #dc3545;
            opacity: 0.7;
        }
        
        .api-key-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .api-key-provider {
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .api-key-status {
            font-size: 0.9em;
            padding: 2px 6px;
            border-radius: 10px;
            display: inline-block;
            background-color: #e9ecef;
        }
        
        .api-key-item.active .api-key-status {
            color: #28a745;
        }
        
        .api-key-item.inactive .api-key-status {
            color: #dc3545;
        }
        
        .api-key-date {
            font-size: 0.85em;
            color: #6c757d;
        }
        
        .api-key-actions {
            display: flex;
            gap: 5px;
        }
        
        .loading-indicator {
            text-align: center;
            padding: 10px;
            color: #6c757d;
        }
        
        .empty-message {
            text-align: center;
            padding: 15px;
            color: #6c757d;
            font-style: italic;
        }
        
        .error-message {
            color: #dc3545;
            margin-top: 10px;
        }
    </style>
</head>
<body class="dark-theme">
    <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
    <header class="navbar">
        <div class="logo">
            <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M14 2C7.373 2 2 7.373 2 14C2 20.627 7.373 26 14 26C20.627 26 26 20.627 26 14C26 7.373 20.627 2 14 2ZM14 5C18.418 5 22 8.582 22 13C22 17.418 18.418 21 14 21C9.582 21 6 17.418 6 13C6 8.582 9.582 5 14 5Z" fill="white"/>
            </svg>
            <span>Xpat ÁÆ°ÁêÜÂêéÂè∞</span>
        </div>
        <div class="nav-controls">
            <button class="icon-btn theme-toggle-btn" id="themeToggle" title="ÂàáÊç¢‰∏ªÈ¢ò">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="theme-icon">
                    <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z" fill="currentColor"/>
                </svg>
            </button>
            <a href="index.html" class="nav-link" title="ËøîÂõûÂâçÂè∞">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 12L5 10M5 10L12 3L19 10M5 10V20C5 20.5523 5.44772 21 6 21H9M19 10L21 12M19 10V20C19 20.5523 18.5523 21 18 21H15M9 21C9.55228 21 10 20.5523 10 20V16C10 15.4477 10.4477 15 11 15H13C13.5523 15 14 15.4477 14 16V20C14 20.5523 14.4477 21 15 21M9 21H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </a>
            <button class="icon-btn logout-btn" id="logoutBtn" title="ÈÄÄÂá∫ÁôªÂΩï" style="display: none;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17 16L21 12M21 12L17 8M21 12H7M13 16V17C13 18.6569 11.6569 20 10 20H6C4.34315 20 3 18.6569 3 17V7C3 5.34315 4.34315 4 6 4H10C11.6569 4 13 5.34315 13 7V8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
    </header>

    <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü -->
    <main>
        <!-- ÁôªÂΩïË°®Âçï -->
        <div id="loginContainer" class="admin-container">
            <div class="card">
                <h2>ÁÆ°ÁêÜÂëòÁôªÂΩï</h2>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="email">ÈÇÆÁÆ±</label>
                        <input type="email" id="email" required placeholder="ËØ∑ËæìÂÖ•ÁÆ°ÁêÜÂëòÈÇÆÁÆ±">
                    </div>
                    <div class="form-group">
                        <label for="password">ÂØÜÁ†Å</label>
                        <input type="password" id="password" required placeholder="ËØ∑ËæìÂÖ•ÂØÜÁ†Å">
                    </div>
                    <div class="form-error" id="loginError"></div>
                    <button type="submit" class="btn btn-primary">ÁôªÂΩï</button>
                </form>
            </div>
        </div>

        <!-- ÁÆ°ÁêÜÂêéÂè∞ÂÜÖÂÆπ -->
        <div id="adminContent" style="display: none;">
            <!-- ÁßªÂä®Á´ØËèúÂçïÂàáÊç¢ÊåâÈíÆ -->
            <button class="menu-toggle" id="menuToggle">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </button>
            
            <!-- ‰æßËæπÊ†èËèúÂçï -->
            <aside class="sidebar">
                <nav>
                    <ul>
                        <li data-tab="dashboard" class="active">
                            <span class="icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="14" width="7" height="7"></rect>
                                    <rect x="3" y="14" width="7" height="7"></rect>
                                </svg>
                            </span>
                            <span>‰ª™Ë°®Áõò</span>
                        </li>
                        
                        <li data-tab="promptsManagement">
                            <span class="icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                </svg>
                            </span>
                            <span>ÊèêÁ§∫ËØçÁÆ°ÁêÜ</span>
                        </li>
                        
                        <li data-tab="chatModeManagement">
                            <span class="icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M17 8h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2v4l-4-4H9a2 2 0 0 1-2-2v-1"></path>
                                    <path d="M7 18h2a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H7v4L3 6v12l4-4z"></path>
                                </svg>
                            </span>
                            <span>ÂØπËØùÊ®°ÂºèÁÆ°ÁêÜ</span>
                        </li>
                        
                        <li data-tab="userManagement">
                            <span class="icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                            </span>
                            <span>Áî®Êà∑ÁÆ°ÁêÜ</span>
                        </li>
                        
                        <li data-tab="userFeaturesConfig">
                            <span class="icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                </svg>
                            </span>
                            <span>Áî®Êà∑ÂäüËÉΩÈÖçÁΩÆ</span>
                        </li>
                        
                        <li data-tab="subscriptionManagement">
                            <span class="icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                                    <line x1="1" y1="10" x2="23" y2="10"></line>
                                </svg>
                            </span>
                            <span>ËÆ¢ÈòÖÁÆ°ÁêÜ</span>
                        </li>
                        
                        <li data-tab="apiConfig">
                            <span class="icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M12 20h9"></path>
                                    <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
                                </svg>
                            </span>
                            <span>APIÈÖçÁΩÆ</span>
                        </li>
                        
                        <li data-tab="apiUsage">
                            <span class="icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="18" y1="20" x2="18" y2="10"></line>
                                    <line x1="12" y1="20" x2="12" y2="4"></line>
                                    <line x1="6" y1="20" x2="6" y2="14"></line>
                                </svg>
                            </span>
                            <span>API‰ΩøÁî®ÁªüËÆ°</span>
                        </li>
                        
                        <li data-tab="apiKeysManagement">
                            <span class="icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path>
                                </svg>
                            </span>
                            <span>APIÂØÜÈí•ÁÆ°ÁêÜ</span>
                        </li>
                        
                        <li data-tab="settingsManagement">
                            <span class="icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="3"></circle>
                                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                                </svg>
                            </span>
                            <span>Á≥ªÁªüËÆæÁΩÆ</span>
                        </li>
                        
                        <li data-tab="adminLogs">
                            <span class="icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
                                    <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
                                    <line x1="9" y1="9" x2="10" y2="9"></line>
                                    <line x1="9" y1="13" x2="15" y2="13"></line>
                                    <line x1="9" y1="17" x2="15" y2="17"></line>
                                </svg>
                            </span>
                            <span>ÁÆ°ÁêÜÂëòÊó•Âøó</span>
                        </li>
                    </ul>
                </nav>
                <div class="user-info">
                    <div class="avatar">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </div>
                    <div class="user-details">
                        <div class="username">ÁÆ°ÁêÜÂëò</div>
                        <div class="role">Á≥ªÁªüÁÆ°ÁêÜÂëò</div>
                    </div>
                </div>
            </aside>

            <!-- ÂÜÖÂÆπÂå∫Âüü -->
            <div class="content-area">
                <!-- ‰ª™Ë°®ÁõòÈÉ®ÂàÜ -->
                <section id="dashboard" class="admin-section">
                    <div class="section-header">
                        <h2>Á≥ªÁªü‰ª™Ë°®Áõò</h2>
                        <div class="actions">
                            <button class="btn btn-outline" id="refreshDashboardBtn" title="Âà∑Êñ∞Êï∞ÊçÆ">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4m-4 4a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"></path>
                                </svg>
                                Âà∑Êñ∞
                            </button>
                            <div class="dropdown">
                                <button class="btn btn-outline dropdown-toggle" id="dashboardPeriodBtn">
                                    <span>ÊúÄËøë7Â§©</span>
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M6 9l6 6 6-6"></path>
                                    </svg>
                                </button>
                                <div class="dropdown-menu">
                                    <a href="#" data-period="7" class="active">ÊúÄËøë7Â§©</a>
                                    <a href="#" data-period="30">ÊúÄËøë30Â§©</a>
                                    <a href="#" data-period="90">ÊúÄËøë90Â§©</a>
                                    <a href="#" data-period="180">ÊúÄËøëÂçäÂπ¥</a>
                                    <a href="#" data-period="365">ÊúÄËøë‰∏ÄÂπ¥</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Âä†ËΩΩÁä∂ÊÄÅ -->
                    <div id="dashboardLoadingState" class="loading-state">
                        <div class="spinner"></div>
                        <p>Ê≠£Âú®Âä†ËΩΩ‰ª™Ë°®ÁõòÊï∞ÊçÆ...</p>
                    </div>
                    
                    <!-- ÈîôËØØÁä∂ÊÄÅ -->
                    <div id="dashboardErrorState" class="error-state" style="display: none;">
                        <div class="error-icon">‚ö†Ô∏è</div>
                        <p>Âä†ËΩΩ‰ª™Ë°®ÁõòÊï∞ÊçÆÂ§±Ë¥•</p>
                    </div>
                    
                    <!-- Êï∞ÊçÆÊ¶ÇËßàÂç°Áâá -->
                    <div class="data-cards">
                        <div class="data-card">
                            <div class="card-icon">üë•</div>
                            <div class="card-content">
                                <div class="card-title">ÊÄªÁî®Êà∑Êï∞</div>
                                <div class="card-value" id="totalUsersValue">--</div>
                                <div class="card-growth" id="totalUsersGrowth"></div>
                            </div>
                        </div>
                        <div class="data-card">
                            <div class="card-icon">üèÉ</div>
                            <div class="card-content">
                                <div class="card-title">Ê¥ªË∑ÉÁî®Êà∑</div>
                                <div class="card-value" id="activeUsersValue">--</div>
                                <div class="card-growth" id="activeUsersGrowth"></div>
                            </div>
                        </div>
                        <div class="data-card">
                            <div class="card-icon">üîÑ</div>
                            <div class="card-content">
                                <div class="card-title">APIÊÄªË∞ÉÁî®Èáè</div>
                                <div class="card-value" id="totalApiCallsValue">--</div>
                                <div class="card-growth" id="totalApiCallsGrowth"></div>
                            </div>
                        </div>
                        <div class="data-card">
                            <div class="card-icon">üìä</div>
                            <div class="card-content">
                                <div class="card-title">‰ªäÊó•APIË∞ÉÁî®</div>
                                <div class="card-value" id="todayApiCallsValue">--</div>
                                <div class="card-growth" id="todayApiCallsGrowth"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Áî®Êà∑ÁªüËÆ° -->
                    <div class="dashboard-section">
                        <h3 class="section-title">Áî®Êà∑ÁªüËÆ°</h3>
                        <div class="chart-container-group">
                            <div class="chart-container">
                                <h4>Áî®Êà∑Â¢ûÈïøË∂ãÂäø</h4>
                                <canvas id="userGrowthChart"></canvas>
                            </div>
                            <div class="chart-container">
                                <h4>Áî®Êà∑ËßíËâ≤ÂàÜÂ∏É</h4>
                                <canvas id="userRoleChart"></canvas>
                            </div>
                            <div class="chart-container">
                                <h4>Áî®Êà∑Ê¥ªË∑ÉÂ∫¶</h4>
                                <canvas id="userActivityChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- API‰ΩøÁî®ÁªüËÆ° -->
                    <div class="dashboard-section">
                        <h3 class="section-title">API‰ΩøÁî®ÁªüËÆ°</h3>
                        <div class="chart-container-group">
                            <div class="chart-container">
                                <h4>APIË∞ÉÁî®Ë∂ãÂäø</h4>
                                <canvas id="apiCallsChart"></canvas>
                            </div>
                            <div class="chart-container">
                                <h4>Ê®°Âûã‰ΩøÁî®ÂàÜÂ∏É</h4>
                                <canvas id="modelUsageChart"></canvas>
                            </div>
                            <div class="chart-container">
                                <h4>ÈÖçÈ¢ù‰ΩøÁî®ÊéíË°å</h4>
                                <canvas id="quotaUsageChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ËÆ¢ÈòÖÁªüËÆ° -->
                    <div class="dashboard-section">
                        <h3 class="section-title">ËÆ¢ÈòÖÁªüËÆ°</h3>
                        <div class="data-cards">
                            <div class="data-card">
                                <div class="card-icon">üìù</div>
                                <div class="card-content">
                                    <div class="card-title">ÊÄªËÆ¢ÈòÖÊï∞</div>
                                    <div class="card-value" id="totalSubscriptionsValue">--</div>
                                </div>
                            </div>
                            <div class="data-card">
                                <div class="card-icon">‚úÖ</div>
                                <div class="card-content">
                                    <div class="card-title">Ê¥ªË∑ÉËÆ¢ÈòÖ</div>
                                    <div class="card-value" id="activeSubscriptionsValue">--</div>
                                </div>
                            </div>
                            <div class="data-card">
                                <div class="card-icon">üí∞</div>
                                <div class="card-content">
                                    <div class="card-title">ÊúàÂ∫¶Êî∂ÂÖ•</div>
                                    <div class="card-value" id="monthlyRevenueValue">--</div>
                                </div>
                            </div>
                        </div>
                        <div class="chart-container-group">
                            <div class="chart-container">
                                <h4>ËÆ¢ÈòÖËÆ°ÂàíÂàÜÂ∏É</h4>
                                <canvas id="subscriptionPlanChart"></canvas>
                            </div>
                            <div class="chart-container">
                                <h4>ËÆ¢ÈòÖË∂ãÂäø</h4>
                                <canvas id="subscriptionTrendChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ÊèêÁ§∫ËØçÁÆ°ÁêÜ -->
                <section id="promptsManagement" class="admin-section">
                    <div class="section-header">
                        <h2>ÊèêÁ§∫ËØçÁÆ°ÁêÜ</h2>
                        <button class="btn btn-primary" id="addPromptBtn">Êñ∞Â¢ûÊèêÁ§∫ËØç</button>
                    </div>
                    
                    <div class="filters">
                        <div class="form-group">
                            <label for="promptCategoryFilter">ÂàÜÁ±ªÁ≠õÈÄâ</label>
                            <select id="promptCategoryFilter">
                                <option value="">ÊâÄÊúâÂàÜÁ±ª</option>
                                <option value="general">ÈÄöÁî®ÂØπËØù</option>
                                <option value="patent-search">‰∏ìÂà©Ê£ÄÁ¥¢</option>
                                <option value="patent-writing">‰∏ìÂà©Êí∞ÂÜô</option>
                                <option value="patent-analysis">‰∏ìÂà©ÂàÜÊûê</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="data-table-container">
                        <table class="data-table" id="promptsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>ÂêçÁß∞</th>
                                    <th>ÂàÜÁ±ª</th>
                                    <th>ÂÖ¨ÂºÄÁä∂ÊÄÅ</th>
                                    <th>ÂàõÂª∫ËÄÖ</th>
                                    <th>ÂàõÂª∫Êó∂Èó¥</th>
                                    <th>Êìç‰Ωú</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Êï∞ÊçÆÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                            </tbody>
                        </table>
                        <div class="empty-state" id="promptsEmptyState" style="display: none;">
                            <p>ÊöÇÊó†Êï∞ÊçÆ</p>
                        </div>
                        <div class="loading-state" id="promptsLoadingState">
                            <p>Âä†ËΩΩ‰∏≠...</p>
                        </div>
                    </div>
                </section>

                <!-- È¢ÜÂüüÊ®°ÊùøÁÆ°ÁêÜ -->
                <section id="domainTemplates" class="admin-section" style="display: none;">
                    <div class="section-header">
                        <h2>È¢ÜÂüüÁâπÂÆöÊ®°ÊùøÁÆ°ÁêÜ</h2>
                        <button class="btn btn-primary" id="addDomainTemplateBtn">Êñ∞Â¢ûÈ¢ÜÂüüÊ®°Êùø</button>
                    </div>
                    
                    <div class="filters">
                        <div class="form-group">
                            <label for="domainFilter">ÊäÄÊúØÈ¢ÜÂüüÁ≠õÈÄâ</label>
                            <select id="domainFilter">
                                <option value="">ÊâÄÊúâÊäÄÊúØÈ¢ÜÂüü</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="modeFilter">ÂØπËØùÊ®°ÂºèÁ≠õÈÄâ</label>
                            <select id="modeFilter">
                                <option value="">ÊâÄÊúâÂØπËØùÊ®°Âºè</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table id="domainTemplatesTable" class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>ÊäÄÊúØÈ¢ÜÂüü</th>
                                    <th>ÂØπËØùÊ®°Âºè</th>
                                    <th>ÂêçÁß∞</th>
                                    <th>ÂàõÂª∫Êó∂Èó¥</th>
                                    <th>Êõ¥Êñ∞Êó∂Èó¥</th>
                                    <th>Êìç‰Ωú</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- JSÂä®ÊÄÅÂ°´ÂÖÖ -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- APIÈÖçÁΩÆ -->
                <section id="apiConfig" class="admin-section" style="display: none;">
                    <div class="section-header">
                        <h2>APIÈÖçÁΩÆÁÆ°ÁêÜ</h2>
                    </div>
                    
                    <!-- Ê∑ªÂä†APIÊèê‰æõÂïÜÁÆ°ÁêÜÈÉ®ÂàÜ -->
                    <div class="subsection-header">
                        <h3>APIÊèê‰æõÂïÜÁÆ°ÁêÜ</h3>
                        <button class="btn btn-primary btn-sm" id="addApiProviderBtn">Ê∑ªÂä†Êèê‰æõÂïÜ</button>
                    </div>
                    
                    <div class="data-table-container">
                        <table class="data-table" id="apiProvidersTable">
                            <thead>
                                <tr>
                                    <th>Êèê‰æõÂïÜÂêçÁß∞</th>
                                    <th>APIÁ´ØÁÇπ</th>
                                    <th>ÊîØÊåÅÊ®°ÂûãÊï∞</th>
                                    <th>Áä∂ÊÄÅ</th>
                                    <th>Êìç‰Ωú</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Êï∞ÊçÆÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                            </tbody>
                        </table>
                        <div class="empty-state" id="apiProvidersEmptyState" style="display: none;">
                            <p>ÊöÇÊó†APIÊèê‰æõÂïÜÊï∞ÊçÆ</p>
                        </div>
                        <div class="loading-state" id="apiProvidersLoadingState">
                            <p>Âä†ËΩΩ‰∏≠...</p>
                        </div>
                    </div>
                    
                    <!-- Ê∑ªÂä†APIÊ®°ÂûãÁÆ°ÁêÜÈÉ®ÂàÜ -->
                    <div class="subsection-header" style="margin-top: 30px;">
                        <h3>Ê®°ÂûãÁÆ°ÁêÜ</h3>
                    </div>
                    
                    <div class="data-table-container">
                        <table class="data-table" id="apiModelsTable">
                            <thead>
                                <tr>
                                    <th>Ê®°ÂûãÂêçÁß∞</th>
                                    <th>Êèê‰æõÂïÜ</th>
                                    <th>‰∏ä‰∏ãÊñáÂ§ßÂ∞è</th>
                                    <th>Áä∂ÊÄÅ</th>
                                    <th>Êìç‰Ωú</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Êï∞ÊçÆÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                            </tbody>
                        </table>
                        <div class="empty-state" id="apiModelsEmptyState" style="display: none;">
                            <p>ÊöÇÊó†Ê®°ÂûãÊï∞ÊçÆ</p>
                        </div>
                        <div class="loading-state" id="apiModelsLoadingState">
                            <p>Âä†ËΩΩ‰∏≠...</p>
                        </div>
                    </div>
                    
                    <!-- Ê∑ªÂä†ÂÖ®Â±ÄAPIÂèÇÊï∞ËÆæÁΩÆÈÉ®ÂàÜ -->
                    <div class="subsection-header" style="margin-top: 30px;">
                        <h3>ÂÖ®Â±ÄAPIÂèÇÊï∞ËÆæÁΩÆ</h3>
                    </div>
                    
                    <div class="api-config-card">
                        <form id="globalApiConfigForm">
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="defaultApiProvider">ÈªòËÆ§APIÊèê‰æõÂïÜ</label>
                                    <select id="defaultApiProvider" class="form-control">
                                        <!-- Áî±JavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                                        <option value="">ËØ∑ÈÄâÊã©ÈªòËÆ§Êèê‰æõÂïÜ</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="defaultModel">ÈªòËÆ§Ê®°Âûã</label>
                                    <select id="defaultModel" class="form-control">
                                        <!-- Áî±JavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                                        <option value="">ËØ∑ÈÄâÊã©ÈªòËÆ§Ê®°Âûã</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>APIËØ∑Ê±ÇËÆæÁΩÆ</label>
                                <div class="form-row">
                                    <div class="form-group col-md-4">
                                        <label for="defaultTemperature">ÈªòËÆ§Ê∏©Â∫¶</label>
                                        <input type="number" id="defaultTemperature" class="form-control" min="0" max="2" step="0.1" value="0.7">
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="defaultMaxTokens">ÈªòËÆ§ÊúÄÂ§ßTokens</label>
                                        <input type="number" id="defaultMaxTokens" class="form-control" min="100" max="32000" step="100" value="2000">
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="requestTimeout">ËØ∑Ê±ÇË∂ÖÊó∂(Áßí)</label>
                                        <input type="number" id="requestTimeout" class="form-control" min="5" max="300" step="1" value="60">
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <button type="submit" class="btn btn-primary" id="saveGlobalApiConfigBtn">‰øùÂ≠òËÆæÁΩÆ</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </section>

                <!-- Áî®Êà∑ÁÆ°ÁêÜ -->
                <section id="userManagement" class="admin-section" style="display: none;">
                    <div class="section-header">
                        <h2>Áî®Êà∑ÁÆ°ÁêÜ</h2>
                        <button class="btn btn-primary" id="addUserBtn">Êñ∞Â¢ûÁî®Êà∑</button>
                    </div>
                    
                    <div class="filters">
                        <div class="form-group">
                            <select id="userRoleFilter">
                                <option value="">ÊâÄÊúâËßíËâ≤</option>
                                <option value="admin">ÁÆ°ÁêÜÂëò</option>
                                <option value="user">ÊôÆÈÄöÁî®Êà∑</option>
                            </select>
                        </div>
                        <div class="search-box">
                            <input type="text" id="userSearchInput" placeholder="ÊêúÁ¥¢Áî®Êà∑ÂêçÊàñÈÇÆÁÆ±...">
                            <button id="userSearchBtn" class="btn btn-secondary">ÊêúÁ¥¢</button>
                        </div>
                    </div>
                    
                    <div class="data-table-container">
                        <table class="data-table" id="usersTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Áî®Êà∑Âêç</th>
                                    <th>ÈÇÆÁÆ±</th>
                                    <th>ËßíËâ≤</th>
                                    <th>APIÈÖçÈ¢ù</th>
                                    <th>API‰ΩøÁî®Èáè</th>
                                    <th>Ê≥®ÂÜåÊó∂Èó¥</th>
                                    <th>Êìç‰Ωú</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Êï∞ÊçÆÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                            </tbody>
                        </table>
                        <div class="empty-state" id="usersEmptyState" style="display: none;">
                            <p>ÊöÇÊó†Êï∞ÊçÆ</p>
                        </div>
                        <div class="loading-state" id="usersLoadingState">
                            <p>Âä†ËΩΩ‰∏≠...</p>
                        </div>
                    </div>
                    
                    <div class="pagination" id="usersPagination">
                        <button class="pagination-btn" id="prevPageBtn" disabled>&laquo; ‰∏ä‰∏ÄÈ°µ</button>
                        <span class="pagination-info">Á¨¨ <span id="currentPage">1</span> È°µÔºåÂÖ± <span id="totalPages">1</span> È°µ</span>
                        <button class="pagination-btn" id="nextPageBtn" disabled>‰∏ã‰∏ÄÈ°µ &raquo;</button>
                    </div>
                </section>

                <!-- Áî®Êà∑ÂäüËÉΩÈÖçÁΩÆ -->
                <section id="userFeaturesConfig" class="admin-section" style="display: none;">
                    <div class="section-header">
                        <h2>Áî®Êà∑ÂäüËÉΩÈÖçÁΩÆ</h2>
                    </div>
                    
                    <div class="user-selector-container">
                        <div class="form-group">
                            <label for="userConfigSelector">ÈÄâÊã©Áî®Êà∑</label>
                            <select id="userConfigSelector" class="form-control">
                                <option value="">ËØ∑ÈÄâÊã©Áî®Êà∑...</option>
                                <!-- Áî±JavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                            </select>
                        </div>
                    </div>
                    
                    <div id="userConfigContent" style="display: none;">
                        <div class="user-config-header">
                            <h3>ÈÖçÁΩÆÁî®Êà∑: <span id="selectedUserName"></span></h3>
                            <button class="btn btn-primary" id="saveUserConfigBtn">‰øùÂ≠òÈÖçÁΩÆ</button>
                        </div>
                        
                        <div class="tabs-container">
                            <div class="tabs-header">
                                <div class="tab-item active" data-config-tab="chatModes">ÂØπËØùÊ®°Âºè</div>
                                <div class="tab-item" data-config-tab="promptTemplates">ÊèêÁ§∫ËØçÊ®°Êùø</div>
                                <div class="tab-item" data-config-tab="apiProviders">API‰æõÂ∫îÂïÜ</div>
                                <div class="tab-item" data-config-tab="models">Ê®°ÂûãÈÖçÁΩÆ</div>
                            </div>
                            
                            <div class="tabs-content">
                                <!-- ÂØπËØùÊ®°ÂºèÈÖçÁΩÆ -->
                                <div class="tab-content active" id="chatModesConfig">
                                    <div class="table-toolbar">
                                        <span class="section-subtitle">ÂèØÁî®ÂØπËØùÊ®°Âºè</span>
                                        <div class="toolbar-actions">
                                            <button class="btn btn-sm btn-outline" id="selectAllChatModesBtn">ÂÖ®ÈÄâ</button>
                                            <button class="btn btn-sm btn-outline" id="unselectAllChatModesBtn">ÂÖ®‰∏çÈÄâ</button>
                                        </div>
                                    </div>
                                    
                                    <div class="compact-table-container">
                                        <table class="compact-table" id="userChatModesTable">
                                            <thead>
                                                <tr>
                                                    <th style="width: 50px">ÂêØÁî®</th>
                                                    <th>Ê®°ÂºèÂêçÁß∞</th>
                                                    <th>ÊèèËø∞</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Áî±JavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                                                <tr>
                                                    <td colspan="3" class="text-center">Âä†ËΩΩ‰∏≠...</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                
                                <!-- ÊèêÁ§∫ËØçÊ®°ÊùøÈÖçÁΩÆ -->
                                <div class="tab-content" id="promptTemplatesConfig">
                                    <div class="table-toolbar">
                                        <span class="section-subtitle">ÂèØÁî®ÊèêÁ§∫ËØçÊ®°Êùø</span>
                                        <div class="toolbar-actions">
                                            <button class="btn btn-sm btn-outline" id="selectAllPromptsBtn">ÂÖ®ÈÄâ</button>
                                            <button class="btn btn-sm btn-outline" id="unselectAllPromptsBtn">ÂÖ®‰∏çÈÄâ</button>
                                        </div>
                                    </div>
                                    
                                    <div class="compact-table-container">
                                        <table class="compact-table" id="userPromptsTable">
                                            <thead>
                                                <tr>
                                                    <th style="width: 50px">ÂêØÁî®</th>
                                                    <th>Ê®°ÊùøÂêçÁß∞</th>
                                                    <th>ÂàÜÁ±ª</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Áî±JavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                                                <tr>
                                                    <td colspan="3" class="text-center">Âä†ËΩΩ‰∏≠...</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                
                                <!-- API‰æõÂ∫îÂïÜÈÖçÁΩÆ -->
                                <div class="tab-content" id="apiProvidersConfig">
                                    <div class="table-toolbar">
                                        <span class="section-subtitle">ÂèØÁî®API‰æõÂ∫îÂïÜ</span>
                                        <div class="toolbar-actions">
                                            <button class="btn btn-sm btn-outline" id="selectAllProvidersBtn">ÂÖ®ÈÄâ</button>
                                            <button class="btn btn-sm btn-outline" id="unselectAllProvidersBtn">ÂÖ®‰∏çÈÄâ</button>
                                        </div>
                                    </div>
                                    
                                    <div class="compact-table-container">
                                        <table class="compact-table" id="userProvidersTable">
                                            <thead>
                                                <tr>
                                                    <th style="width: 50px">ÂêØÁî®</th>
                                                    <th>‰æõÂ∫îÂïÜ</th>
                                                    <th>APIÂØÜÈí•ÈÖçÁΩÆ</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Áî±JavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                                                <tr>
                                                    <td colspan="3" class="text-center">Âä†ËΩΩ‰∏≠...</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                
                                <!-- Ê®°ÂûãÈÖçÁΩÆ -->
                                <div class="tab-content" id="modelsConfig">
                                    <div class="table-toolbar">
                                        <span class="section-subtitle">ÂèØÁî®Ê®°Âûã</span>
                                        <div class="toolbar-actions">
                                            <button class="btn btn-sm btn-outline" id="selectAllModelsBtn">ÂÖ®ÈÄâ</button>
                                            <button class="btn btn-sm btn-outline" id="unselectAllModelsBtn">ÂÖ®‰∏çÈÄâ</button>
                                        </div>
                                    </div>
                                    
                                    <div class="compact-table-container">
                                        <table class="compact-table" id="userModelsTable">
                                            <thead>
                                                <tr>
                                                    <th style="width: 50px">ÂêØÁî®</th>
                                                    <th>Ê®°ÂûãÂêçÁß∞</th>
                                                    <th>‰æõÂ∫îÂïÜ</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Áî±JavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                                                <tr>
                                                    <td colspan="3" class="text-center">Âä†ËΩΩ‰∏≠...</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="userConfigEmptyState" class="empty-state">
                        <div class="empty-state-icon">üë§</div>
                        <p>ËØ∑ÂÖàÈÄâÊã©Ë¶ÅÈÖçÁΩÆÁöÑÁî®Êà∑</p>
                    </div>
                </section>

                <!-- ËÆ¢ÈòÖÁÆ°ÁêÜ -->
                <section id="subscriptionManagement" class="admin-section" style="display: none;">
                    <div class="section-header">
                        <h2>ËÆ¢ÈòÖÁÆ°ÁêÜ</h2>
                        <button class="btn btn-primary" id="addSubscriptionBtn">Êñ∞Â¢ûËÆ¢ÈòÖËÆ°Âàí</button>
                    </div>
                    
                    <div class="stats-cards">
                        <div class="stats-card">
                            <h3>ÊÄªËÆ¢ÈòÖÊï∞</h3>
                            <div class="stats-value" id="totalSubscriptionsValue">--</div>
                        </div>
                        <div class="stats-card">
                            <h3>Ê¥ªË∑ÉËÆ¢ÈòÖ</h3>
                            <div class="stats-value" id="activeSubscriptionsValue">--</div>
                        </div>
                        <div class="stats-card">
                            <h3>ÊúàÊî∂ÂÖ•</h3>
                            <div class="stats-value" id="monthlyRevenueValue">--</div>
                        </div>
                    </div>
                    
                    <div class="data-table-container">
                        <table class="data-table" id="subscriptionsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>ÂêçÁß∞</th>
                                    <th>‰ª∑Ê†º</th>
                                    <th>ÊúâÊïàÊúü(Â§©)</th>
                                    <th>APIÈÖçÈ¢ù</th>
                                    <th>ËÆ¢ÈòÖÊï∞</th>
                                    <th>Êìç‰Ωú</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Êï∞ÊçÆÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                            </tbody>
                        </table>
                        <div class="empty-state" id="subscriptionsEmptyState" style="display: none;">
                            <p>ÊöÇÊó†ËÆ¢ÈòÖËÆ°Âàí</p>
                        </div>
                        <div class="loading-state" id="subscriptionsLoadingState">
                            <p>Âä†ËΩΩ‰∏≠...</p>
                        </div>
                    </div>
                </section>

                <!-- API‰ΩøÁî®ÁªüËÆ° -->
                <section id="apiUsage" class="admin-section" style="display: none;">
                    <div class="section-header">
                        <h2>API‰ΩøÁî®ÁªüËÆ°</h2>
                    </div>
                    
                    <div class="stats-cards">
                        <div class="stats-card">
                            <h3>‰ªäÊó•APIË∞ÉÁî®</h3>
                            <div class="stats-value" id="todayApiCallsValue">--</div>
                        </div>
                        <div class="stats-card">
                            <h3>ÊÄªAPIË∞ÉÁî®</h3>
                            <div class="stats-value" id="totalApiCallsValue">--</div>
                        </div>
                        <div class="stats-card">
                            <h3>Ê¥ªË∑ÉÁî®Êà∑</h3>
                            <div class="stats-value" id="activeUsersValue">--</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <div class="chart-card">
                            <h3>ÊØèÊó•APIË∞ÉÁî®</h3>
                            <div class="chart" id="dailyApiCallsChart">
                                <div class="placeholder-chart">
                                    <p>ÂõæË°®Âä†ËΩΩ‰∏≠...</p>
                                </div>
                            </div>
                        </div>
                        <div class="chart-card">
                            <h3>Ê®°Âûã‰ΩøÁî®ÂàÜÂ∏É</h3>
                            <div class="chart" id="modelDistributionChart">
                                <div class="placeholder-chart">
                                    <p>ÂõæË°®Âä†ËΩΩ‰∏≠...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section-header subsection-header">
                        <h3>Áî®Êà∑API‰ΩøÁî®ÊéíË°å</h3>
                    </div>
                    <div class="data-table-container">
                        <table class="data-table" id="apiUsageTable">
                            <thead>
                                <tr>
                                    <th>Áî®Êà∑ID</th>
                                    <th>Áî®Êà∑Âêç</th>
                                    <th>APIË∞ÉÁî®Ê¨°Êï∞</th>
                                    <th>ÈÖçÈ¢ù‰ΩøÁî®ÊØî‰æã</th>
                                    <th>Â∏∏Áî®Ê®°Âûã</th>
                                    <th>‰∏äÊ¨°‰ΩøÁî®Êó∂Èó¥</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Êï∞ÊçÆÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                            </tbody>
                        </table>
                        <div class="empty-state" id="apiUsageEmptyState" style="display: none;">
                            <p>ÊöÇÊó†API‰ΩøÁî®Êï∞ÊçÆ</p>
                        </div>
                        <div class="loading-state" id="apiUsageLoadingState">
                            <p>Âä†ËΩΩ‰∏≠...</p>
                        </div>
                    </div>
                </section>

                <!-- ÂØπËØùÊ®°ÂºèÁÆ°ÁêÜ -->
                <section id="chatModeManagement" class="admin-section" style="display: none;">
                    <div class="section-header">
                        <h2>ÂØπËØùÊ®°ÂºèÁÆ°ÁêÜ</h2>
                        <button class="btn btn-primary" id="addChatModeBtn">Êñ∞Â¢ûÂØπËØùÊ®°Âºè</button>
                    </div>
                    
                    <div class="filters">
                        <div class="form-group">
                            <label for="chatModeStatusFilter">Áä∂ÊÄÅ</label>
                            <select id="chatModeStatusFilter">
                                <option value="">ÂÖ®ÈÉ®</option>
                                <option value="active">ÂêØÁî®</option>
                                <option value="inactive">Á¶ÅÁî®</option>
                            </select>
                        </div>
                        <div class="search-box">
                            <input type="text" id="chatModeSearchInput" placeholder="ÊêúÁ¥¢Ê®°ÂºèÂêçÁß∞...">
                            <button id="chatModeSearchBtn" class="btn btn-secondary">ÊêúÁ¥¢</button>
                        </div>
                    </div>
                    
                    <div class="data-table-container">
                        <table class="data-table" id="chatModesTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Ê®°ÂºèÂêçÁß∞</th>
                                    <th>ÊèèËø∞</th>
                                    <th>ÈªòËÆ§Ê®°Âûã</th>
                                    <th>Áî®Êà∑ÂèØËßÅÊÄß</th>
                                    <th>Áä∂ÊÄÅ</th>
                                    <th>Êìç‰Ωú</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Êï∞ÊçÆÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                            </tbody>
                        </table>
                        <div class="empty-state" id="chatModesEmptyState" style="display: none;">
                            <p>ÊöÇÊó†ÂØπËØùÊ®°ÂºèÊï∞ÊçÆ</p>
                        </div>
                        <div class="loading-state" id="chatModesLoadingState">
                            <p>Âä†ËΩΩ‰∏≠...</p>
                        </div>
                    </div>
                    
                    <div class="section-header subsection-header">
                        <h3>Áî®Êà∑ÂØπËØùÊ®°ÂºèÊùÉÈôê</h3>
                    </div>
                    
                    <div class="filters">
                        <div class="form-group">
                            <label for="userPermissionChatModeFilter">Áî®Êà∑</label>
                            <select id="userPermissionChatModeFilter">
                                <option value="">ÈÄâÊã©Áî®Êà∑...</option>
                                <!-- Áî®Êà∑Êï∞ÊçÆÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                            </select>
                        </div>
                    </div>
                    
                    <div class="data-table-container">
                        <table class="data-table" id="userChatModeTable">
                            <thead>
                                <tr>
                                    <th>ÂØπËØùÊ®°Âºè</th>
                                    <th>ÊùÉÈôêÁä∂ÊÄÅ</th>
                                    <th>Êìç‰Ωú</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Êï∞ÊçÆÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                            </tbody>
                        </table>
                        <div class="empty-state" id="userChatModeEmptyState" style="display: none;">
                            <p>ËØ∑ÂÖàÈÄâÊã©Áî®Êà∑</p>
                        </div>
                        <div class="loading-state" id="userChatModeLoadingState" style="display: none;">
                            <p>Âä†ËΩΩ‰∏≠...</p>
                        </div>
                    </div>
                </section>

                <!-- APIÂØÜÈí•ÁÆ°ÁêÜTabÂÜÖÂÆπ -->
                <section id="apiKeysManagement" class="admin-section" style="display: none;">
                    <div class="section-header">
                        <h2>APIÂØÜÈí•ÁÆ°ÁêÜ</h2>
                        <p>ÁÆ°ÁêÜÁî®Êà∑APIÂØÜÈí•ËÆæÁΩÆ</p>
                    </div>
                    
                    <div class="section-content">
                        <div class="api-keys-container">
                            <div class="mb-4">
                                <p>ÁÆ°ÁêÜÂëòÂèØ‰ª•‰∏∫ÊØè‰∏™Áî®Êà∑ÈÖçÁΩÆ‰∏çÂêåÁöÑAPIÂØÜÈí•ÔºåËã•Áî®Êà∑Êú™ËÆæÁΩÆÂàôÈªòËÆ§‰ΩøÁî®OpenRouter APIÂØÜÈí•„ÄÇ</p>
                                <button class="btn btn-primary" onclick="setupDefaultApiKeys()">
                                    <i class="bi bi-gear"></i> ËÆæÁΩÆÈªòËÆ§APIÂØÜÈí•
                                </button>
                            </div>
                            <div id="apiKeysList">
                                <p class="text-center">Ê≠£Âú®Âä†ËΩΩAPIÂØÜÈí•ÂàóË°®...</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ÁÆ°ÁêÜÂëòÊ¥ªÂä®Êó•Âøó -->
                <section id="adminLogs" class="admin-section" style="display: none;">
                    <div class="section-header">
                        <h2>ÁÆ°ÁêÜÂëòÊ¥ªÂä®Êó•Âøó</h2>
                        <p>ÁÆ°ÁêÜÂëòÊìç‰ΩúËÆ∞ÂΩï‰∏éÂÆ°ËÆ°</p>
                    </div>
                    
                    <div class="filters">
                        <div class="form-group">
                            <select id="actionTypeFilter" class="form-control">
                                <option value="">ÊâÄÊúâÊìç‰ΩúÁ±ªÂûã</option>
                                <option value="user_management">Áî®Êà∑ÁÆ°ÁêÜ</option>
                                <option value="config_change">ÈÖçÁΩÆÂèòÊõ¥</option>
                                <option value="api_key_management">APIÂØÜÈí•ÁÆ°ÁêÜ</option>
                                <option value="permission_change">ÊùÉÈôêÂèòÊõ¥</option>
                                <option value="admin_login">ÁÆ°ÁêÜÂëòÁôªÂΩï</option>
                                <option value="system_settings">Á≥ªÁªüËÆæÁΩÆ</option>
                            </select>
                        </div>
                        <div class="form-group date-range">
                            <input type="date" id="logStartDate" class="form-control">
                            <span>Ëá≥</span>
                            <input type="date" id="logEndDate" class="form-control">
                        </div>
                        <button id="filterLogsBtn" class="btn btn-secondary">Â∫îÁî®Á≠õÈÄâ</button>
                    </div>
                    
                    <div class="data-table-container">
                        <table class="data-table" id="adminLogsTable">
                            <thead>
                                <tr>
                                    <th>Êó∂Èó¥</th>
                                    <th>ÁÆ°ÁêÜÂëò</th>
                                    <th>Êìç‰ΩúÁ±ªÂûã</th>
                                    <th>ËµÑÊ∫ê</th>
                                    <th>ÊñπÊ≥ï</th>
                                    <th>Áä∂ÊÄÅ</th>
                                    <th>IPÂú∞ÂùÄ</th>
                                    <th>Êìç‰Ωú</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Áî±JSÂä®ÊÄÅÂ°´ÂÖÖ -->
                            </tbody>
                        </table>
                        <div class="empty-state" id="logsEmptyState" style="display: none;">
                            <p>ÊöÇÊó†ÁÆ°ÁêÜÂëòÊìç‰ΩúËÆ∞ÂΩï</p>
                        </div>
                        <div class="loading-state" id="logsLoadingState">
                            <p>Âä†ËΩΩ‰∏≠...</p>
                        </div>
                    </div>
                    
                    <div class="pagination" id="logsPagination">
                        <button class="pagination-btn" id="logsPrevBtn" disabled>&laquo; ‰∏ä‰∏ÄÈ°µ</button>
                        <span class="pagination-info">Á¨¨ <span id="logsCurrentPage">1</span> È°µÔºåÂÖ± <span id="logsTotalPages">1</span> È°µ</span>
                        <button class="pagination-btn" id="logsNextBtn" disabled>‰∏ã‰∏ÄÈ°µ &raquo;</button>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Ê®°ÊÄÅÊ°Ü -->
    <div id="modalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">ÊèêÁ§∫ËØçÁºñËæë</h3>
                <button class="close-modal" id="closeModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="promptForm">
                    <input type="hidden" id="promptId">
                    <div class="form-group">
                        <label for="promptName">ÂêçÁß∞</label>
                        <input type="text" id="promptName" required placeholder="ÊèêÁ§∫ËØçÂêçÁß∞">
                    </div>
                    <div class="form-group">
                        <label for="promptCategory">ÂàÜÁ±ª</label>
                        <select id="promptCategory" required>
                            <option value="general">ÈÄöÁî®ÂØπËØù</option>
                            <option value="patent-search">‰∏ìÂà©Ê£ÄÁ¥¢</option>
                            <option value="patent-writing">‰∏ìÂà©Êí∞ÂÜô</option>
                            <option value="patent-analysis">‰∏ìÂà©ÂàÜÊûê</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="promptContent">ÂÜÖÂÆπ</label>
                        <textarea id="promptContent" rows="8" required placeholder="ËæìÂÖ•ÊèêÁ§∫ËØçÂÜÖÂÆπ..."></textarea>
                    </div>
                    <div class="form-group checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="promptIsPublic">
                            <span>ÂÖ¨ÂºÄÊèêÁ§∫ËØçÔºàÊâÄÊúâÁî®Êà∑ÂèØËßÅÔºâ</span>
                        </label>
                    </div>
                    <div class="form-error" id="promptFormError"></div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelPromptBtn">ÂèñÊ∂à</button>
                <button class="btn btn-primary" id="savePromptBtn">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>

    <!-- Âà†Èô§Á°ÆËÆ§Ê®°ÊÄÅÊ°Ü -->
    <div id="deleteModalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal small-modal">
            <div class="modal-header">
                <h3>Á°ÆËÆ§Âà†Èô§</h3>
                <button class="close-modal" id="closeDeleteModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <p>Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™ÊèêÁ§∫ËØçÂêóÔºüÊ≠§Êìç‰ΩúÊó†Ê≥ïÊí§ÈîÄ„ÄÇ</p>
                <input type="hidden" id="deletePromptId">
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDeleteBtn">ÂèñÊ∂à</button>
                <button class="btn btn-danger" id="confirmDeleteBtn">Âà†Èô§</button>
            </div>
        </div>
    </div>

    <!-- Áî®Êà∑ÁºñËæëÊ®°ÊÄÅÊ°Ü -->
    <div id="userModalOverlay" class="modal-overlay" style="display: none !important;">
        <div class="modal-container user-modal">
            <div class="modal-header">
                <h2 id="userModalTitle">ÁºñËæëÁî®Êà∑</h2>
                <button id="closeUserModalBtn" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="userForm">
                    <input type="hidden" id="userId">
                    
                    <div class="form-group">
                        <label for="userUsername">Áî®Êà∑Âêç</label>
                        <input type="text" id="userUsername" class="form-control" disabled>
                    </div>
                    
                    <div class="form-group">
                        <label for="userEmail">ÈÇÆÁÆ±</label>
                        <input type="email" id="userEmail" class="form-control" disabled>
                    </div>
                    
                    <div class="form-group">
                        <label for="userRole">ËßíËâ≤</label>
                        <select id="userRole" class="form-control">
                            <option value="basic">ÊôÆÈÄöÁî®Êà∑</option>
                            <option value="admin">ÁÆ°ÁêÜÂëò</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="userApiQuota">APIÈÖçÈ¢ù</label>
                        <input type="number" id="userApiQuota" class="form-control" min="0">
                    </div>
                    
                    <!-- ÊùÉÈôêËÆæÁΩÆ -->
                    <div class="mb-3">
                        <label class="form-label">ÊùÉÈôêËÆæÁΩÆ</label>
                        <div id="userPermissionsContainer" class="border rounded p-3">
                            <div id="userPermissionsLoading" class="my-2">Ê≠£Âú®Âä†ËΩΩÊùÉÈôê...</div>
                            <div id="userPermissionsError" class="alert alert-danger d-none" role="alert"></div>
                            <div id="userPermissionsList" class="d-none"></div>
                        </div>
                    </div>

                    <!-- APIÂØÜÈí•ÁÆ°ÁêÜ -->
                    <div class="mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <label class="form-label mb-0">APIÂØÜÈí•ÁÆ°ÁêÜ</label>
                            <button type="button" id="addUserApiKeyBtn" class="btn btn-sm btn-outline-primary">Ê∑ªÂä†APIÂØÜÈí•</button>
                        </div>
                        <div class="api-keys-container">
                            <div id="userApiKeysLoading" class="loading-indicator">Ê≠£Âú®Âä†ËΩΩAPIÂØÜÈí•...</div>
                            <div id="userApiKeysError" class="error-message d-none"></div>
                            <div id="userApiKeysList" class="api-keys-list d-none"></div>
                        </div>
                    </div>
                    
                    <div class="error-message" id="userFormError"></div>
                    
                    <div class="form-actions">
                        <button type="button" id="saveUserBtn" class="btn btn-primary">‰øùÂ≠ò</button>
                        <button type="button" id="cancelUserBtn" class="btn btn-secondary">ÂèñÊ∂à</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ËßíËâ≤‰øÆÊîπÁ°ÆËÆ§Ê®°ÊÄÅÊ°Ü -->
    <div id="roleConfirmModalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal small-modal">
            <div class="modal-header">
                <h3>Á°ÆËÆ§ËßíËâ≤‰øÆÊîπ</h3>
                <button class="close-modal" id="closeRoleConfirmModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <p>ÊÇ®Á°ÆÂÆöË¶ÅÂ∞ÜÁî®Êà∑ <span id="roleChangeUsername"></span> ÁöÑËßíËâ≤‰ªé <span id="roleChangeOld"></span> ‰øÆÊîπ‰∏∫ <span id="roleChangeNew"></span> ÂêóÔºü</p>
                <p class="warning-text">Ê≠§Êìç‰Ωú‰ºöÂΩ±ÂìçÁî®Êà∑ÁöÑÊùÉÈôêÔºåËØ∑Ë∞®ÊÖéÊìç‰Ωú„ÄÇ</p>
                <input type="hidden" id="roleChangeUserId">
                <input type="hidden" id="roleChangeValue">
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelRoleChangeBtn">ÂèñÊ∂à</button>
                <button class="btn btn-primary" id="confirmRoleChangeBtn">Á°ÆËÆ§‰øÆÊîπ</button>
            </div>
        </div>
    </div>

    <!-- ËÆ¢ÈòÖËÆ°ÂàíÁºñËæëÊ®°ÊÄÅÊ°Ü -->
    <div id="subscriptionModalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3 id="subscriptionModalTitle">ËÆ¢ÈòÖËÆ°ÂàíÁºñËæë</h3>
                <button class="close-modal" id="closeSubscriptionModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="subscriptionForm">
                    <input type="hidden" id="subscriptionId">
                    <div class="form-group">
                        <label for="subscriptionName">ÂêçÁß∞</label>
                        <input type="text" id="subscriptionName" required placeholder="ËÆ¢ÈòÖËÆ°ÂàíÂêçÁß∞">
                    </div>
                    <div class="form-group">
                        <label for="subscriptionPrice">‰ª∑Ê†º (ÂÖÉ/Êúà)</label>
                        <input type="number" id="subscriptionPrice" min="0" step="0.01" required placeholder="ÊúàÂ∫¶‰ª∑Ê†º">
                    </div>
                    <div class="form-group">
                        <label for="subscriptionDuration">ÊúâÊïàÊúü (Â§©)</label>
                        <input type="number" id="subscriptionDuration" min="1" required placeholder="ÈªòËÆ§30Â§©">
                    </div>
                    <div class="form-group">
                        <label for="subscriptionApiQuota">APIË∞ÉÁî®ÈÖçÈ¢ù</label>
                        <input type="number" id="subscriptionApiQuota" min="1" required placeholder="APIË∞ÉÁî®Ê¨°Êï∞">
                    </div>
                    <div class="form-group">
                        <label for="subscriptionFeatures">ÂäüËÉΩÂàóË°®</label>
                        <div class="feature-list" id="featureList">
                            <div class="feature-item">
                                <input type="text" placeholder="ÂäüËÉΩÊèèËø∞">
                                <button type="button" class="btn-icon remove-feature">√ó</button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-secondary btn-sm" id="addFeatureBtn">Ê∑ªÂä†ÂäüËÉΩ</button>
                    </div>
                    <div class="form-error" id="subscriptionFormError"></div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelSubscriptionBtn">ÂèñÊ∂à</button>
                <button class="btn btn-primary" id="saveSubscriptionBtn">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>

    <!-- Âà†Èô§ËÆ¢ÈòÖÁ°ÆËÆ§Ê®°ÊÄÅÊ°Ü -->
    <div id="deleteSubscriptionModalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal small-modal">
            <div class="modal-header">
                <h3>Á°ÆËÆ§Âà†Èô§</h3>
                <button class="close-modal" id="closeDeleteSubscriptionModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <p>Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™ËÆ¢ÈòÖËÆ°ÂàíÂêóÔºüÊ≠§Êìç‰ΩúÊó†Ê≥ïÊí§ÈîÄÔºå‰∏îÂèØËÉΩÂΩ±ÂìçÂ∑≤‰ΩøÁî®Ê≠§ËÆ°ÂàíÁöÑÁî®Êà∑„ÄÇ</p>
                <input type="hidden" id="deleteSubscriptionId">
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDeleteSubscriptionBtn">ÂèñÊ∂à</button>
                <button class="btn btn-danger" id="confirmDeleteSubscriptionBtn">Âà†Èô§</button>
            </div>
        </div>
    </div>

    <!-- Âà†Èô§Áî®Êà∑Á°ÆËÆ§Ê®°ÊÄÅÊ°Ü -->
    <div id="deleteUserModalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal small-modal">
            <div class="modal-header">
                <h3>Á°ÆËÆ§Âà†Èô§Áî®Êà∑</h3>
                <button class="close-modal" id="closeDeleteUserModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <p>Á°ÆÂÆöË¶ÅÂà†Èô§Áî®Êà∑ <span id="deleteUserName"></span> ÂêóÔºü</p>
                <p class="warning-text">Ê≠§Êìç‰ΩúÊó†Ê≥ïÊí§ÈîÄÔºåÁî®Êà∑ÁöÑÊâÄÊúâÊï∞ÊçÆÂ∞ÜË¢´Ê∞∏‰πÖÂà†Èô§„ÄÇ</p>
                <input type="hidden" id="deleteUserId">
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDeleteUserBtn">ÂèñÊ∂à</button>
                <button class="btn btn-danger" id="confirmDeleteUserBtn">Âà†Èô§</button>
            </div>
        </div>
    </div>

    <!-- Êñ∞Â¢ûÁî®Êà∑Ê®°ÊÄÅÊ°Ü -->
    <div id="addUserModalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>Êñ∞Â¢ûÁî®Êà∑</h3>
                <button class="close-modal" id="closeAddUserModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addUserForm">
                    <div class="form-group">
                        <label for="newUsername">Áî®Êà∑Âêç</label>
                        <input type="text" id="newUsername" required placeholder="ËØ∑ËæìÂÖ•Áî®Êà∑Âêç">
                    </div>
                    <div class="form-group">
                        <label for="newEmail">ÈÇÆÁÆ±</label>
                        <input type="email" id="newEmail" required placeholder="ËØ∑ËæìÂÖ•ÈÇÆÁÆ±">
                    </div>
                    <div class="form-group">
                        <label for="newPassword">ÂØÜÁ†Å</label>
                        <input type="password" id="newPassword" required placeholder="ËØ∑ËæìÂÖ•ÂØÜÁ†Å">
                    </div>
                    <div class="form-group">
                        <label for="newRole">ËßíËâ≤</label>
                        <select id="newRole">
                            <option value="user">ÊôÆÈÄöÁî®Êà∑</option>
                            <option value="admin">ÁÆ°ÁêÜÂëò</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="newApiQuota">APIÈÖçÈ¢ù</label>
                        <input type="number" id="newApiQuota" min="0" step="10" value="100">
                    </div>
                    <div class="form-error" id="addUserFormError"></div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelAddUserBtn">ÂèñÊ∂à</button>
                <button class="btn btn-primary" id="saveAddUserBtn">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>

    <!-- È¢ÜÂüüÁâπÂÆöÊ®°ÊùøÁºñËæëÊ®°ÊÄÅÊ°Ü -->
    <div id="domainTemplateModalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal large-modal">
            <div class="modal-header">
                <h3 id="domainTemplateModalTitle">È¢ÜÂüüÁâπÂÆöÊ®°ÊùøÁºñËæë</h3>
                <button class="close-modal" id="closeDomainTemplateModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="domainTemplateForm">
                    <input type="hidden" id="domainTemplateId">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="domainTemplateCategory">ÊäÄÊúØÈ¢ÜÂüü</label>
                            <select id="domainTemplateCategory" required>
                                <!-- JSÂä®ÊÄÅÂ°´ÂÖÖ -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="domainTemplateMode">ÂØπËØùÊ®°Âºè</label>
                            <select id="domainTemplateMode" required>
                                <!-- JSÂä®ÊÄÅÂ°´ÂÖÖ -->
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="domainTemplateName">ÂêçÁß∞</label>
                        <input type="text" id="domainTemplateName" required placeholder="Ê®°ÊùøÂêçÁß∞">
                    </div>
                    <div class="form-group">
                        <label for="domainTemplateSystemPrompt">Á≥ªÁªüÊèêÁ§∫ËØç</label>
                        <textarea id="domainTemplateSystemPrompt" rows="8" required placeholder="ËæìÂÖ•Á≥ªÁªüÊèêÁ§∫ËØçÂÜÖÂÆπ..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="domainTemplatePlaceholder">ËæìÂÖ•Ê°ÜÂç†‰ΩçÊñáÊú¨</label>
                        <input type="text" id="domainTemplatePlaceholder" required placeholder="ËæìÂÖ•Ê°ÜÂç†‰ΩçÊñáÊú¨">
                    </div>
                    <div class="form-error" id="domainTemplateFormError"></div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDomainTemplateBtn">ÂèñÊ∂à</button>
                <button class="btn btn-primary" id="saveDomainTemplateBtn">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>

    <!-- Âà†Èô§È¢ÜÂüüÁâπÂÆöÊ®°ÊùøÁ°ÆËÆ§Ê®°ÊÄÅÊ°Ü -->
    <div id="deleteDomainTemplateModalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal small-modal">
            <div class="modal-header">
                <h3>Á°ÆËÆ§Âà†Èô§È¢ÜÂüüÁâπÂÆöÊ®°Êùø</h3>
                <button class="close-modal" id="closeDeleteDomainTemplateModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <p>Á°ÆÂÆöË¶ÅÂà†Èô§ <span id="deleteDomainTemplateName"></span> ÂêóÔºü</p>
                <p class="warning-text">Ê≠§Êìç‰ΩúÊó†Ê≥ïÊí§ÈîÄ</p>
                <input type="hidden" id="deleteDomainTemplateId">
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDeleteDomainTemplateBtn">ÂèñÊ∂à</button>
                <button class="btn btn-danger" id="confirmDeleteDomainTemplateBtn">Âà†Èô§</button>
            </div>
        </div>
    </div>

    <!-- APIÂØÜÈí•Ê∑ªÂä†/ÁºñËæëÊ®°ÊÄÅÊ°Ü -->
    <div id="userApiKeyModalOverlay" class="modal-overlay">
        <div class="modal-container" style="max-width: 500px;">
            <div class="modal-header">
                <h3>Ê∑ªÂä†Êñ∞APIÂØÜÈí•</h3>
                <button type="button" id="closeUserApiKeyModalBtn" class="close-btn">√ó</button>
            </div>
            <div class="modal-body">
                <form id="userApiKeyForm">
                    <input type="hidden" id="userApiKeyUserId">
                    
                    <div class="mb-3">
                        <label for="userApiKeyProvider" class="form-label">ÊúçÂä°Êèê‰æõÂïÜ</label>
                        <select id="userApiKeyProvider" class="form-select">
                            <option value="">-- ËØ∑ÈÄâÊã© --</option>
                            <option value="openai">OpenAI</option>
                            <option value="anthropic">Anthropic</option>
                            <option value="google">Google</option>
                            <option value="azure">Azure</option>
                            <option value="zhipu">Êô∫Ë∞±AI</option>
                            <option value="baidu">ÁôæÂ∫¶ÊñáÂøÉ</option>
                            <option value="xunfei">ËÆØÈ£ûÊòüÁÅ´</option>
                            <option value="aliyun">ÈòøÈáåÈÄö‰πâ</option>
                            <option value="minimax">MiniMax</option>
                            <option value="mistral">Mistral AI</option>
                            <option value="custom">Ëá™ÂÆö‰πâ</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label for="userApiKeyValue" class="form-label">APIÂØÜÈí•ÂÄº</label>
                        <input type="password" id="userApiKeyValue" class="form-control" placeholder="ËæìÂÖ•APIÂØÜÈí•">
                        <div class="form-text">ÂØÜÈí•Â∞ÜË¢´ÂÆâÂÖ®Âä†ÂØÜÂ≠òÂÇ®</div>
                    </div>
                    
                    <div class="mb-3">
                        <div class="form-check">
                            <input type="checkbox" id="userApiKeyActive" class="form-check-input" checked>
                            <label class="form-check-label" for="userApiKeyActive">ÂêØÁî®Ê≠§ÂØÜÈí•</label>
                        </div>
                    </div>
                    
                    <div id="userApiKeyFormError" class="alert alert-danger d-none" role="alert"></div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" id="saveUserApiKeyBtn" class="btn btn-primary">‰øùÂ≠ò</button>
                <button type="button" id="cancelUserApiKeyBtn" class="btn btn-secondary">ÂèñÊ∂à</button>
            </div>
        </div>
    </div>

    <!-- ÂØπËØùÊ®°ÂºèÁºñËæëÊ®°ÊÄÅÊ°Ü -->
    <div id="chatModeModalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3 id="chatModeModalTitle">ÁºñËæëÂØπËØùÊ®°Âºè</h3>
                <button class="close-modal" id="closeChatModeModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="chatModeForm" class="compact-form">
                    <input type="hidden" id="chatModeId">
                    
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="chatModeName">Ê®°ÂºèÂêçÁß∞</label>
                            <input type="text" id="chatModeName" required placeholder="ËæìÂÖ•ÂØπËØùÊ®°ÂºèÂêçÁß∞">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="chatModeStatus">Áä∂ÊÄÅ</label>
                            <select id="chatModeStatus">
                                <option value="active">ÂêØÁî®</option>
                                <option value="inactive">Á¶ÅÁî®</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="chatModeDescription">ÁÆÄÁü≠ÊèèËø∞</label>
                        <input type="text" id="chatModeDescription" placeholder="ÁÆÄË¶ÅÊèèËø∞ËØ•ÂØπËØùÊ®°ÂºèÁöÑÁî®ÈÄî">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="chatModeDefaultModel">ÈªòËÆ§Ê®°Âûã</label>
                            <select id="chatModeDefaultModel">
                                <option value="gpt-3.5-turbo">GPT-3.5-Turbo</option>
                                <option value="gpt-4">GPT-4</option>
                                <option value="gpt-4-turbo">GPT-4-Turbo</option>
                                <option value="claude-3-opus">Claude-3-Opus</option>
                                <option value="claude-3-sonnet">Claude-3-Sonnet</option>
                                <!-- ÂÖ∂‰ªñÊ®°ÂûãÈÄâÈ°πÂ∞Ü‰ªéAPIÂä®ÊÄÅÂä†ËΩΩ -->
                            </select>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="chatModeProvider">API‰æõÂ∫îÂïÜ</label>
                            <select id="chatModeProvider">
                                <option value="openai">OpenAI</option>
                                <option value="anthropic">Anthropic</option>
                                <option value="openrouter">OpenRouter</option>
                                <!-- ÂÖ∂‰ªñ‰æõÂ∫îÂïÜÈÄâÈ°πÂ∞Ü‰ªéAPIÂä®ÊÄÅÂä†ËΩΩ -->
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="chatModePrompt">Á≥ªÁªüÊèêÁ§∫ËØç</label>
                        <textarea id="chatModePrompt" rows="4" placeholder="ËæìÂÖ•Á≥ªÁªüÊèêÁ§∫ËØç‰ª•ÂÆö‰πâÂØπËØùË°å‰∏∫..."></textarea>
                    </div>
                    
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="chatModeRequiresAuth">
                            <span>ÈúÄË¶ÅË∫´‰ªΩÈ™åËØÅ</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="chatModeIsDefault">
                            <span>ËÆæ‰∏∫ÈªòËÆ§Ê®°Âºè</span>
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label>ÈÄÇÁî®Áî®Êà∑ËßíËâ≤</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="chatModeForBasic" checked>
                                <span>ÊôÆÈÄöÁî®Êà∑</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="chatModeForPremium" checked>
                                <span>È´òÁ∫ßÁî®Êà∑</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="chatModeForAdmin" checked>
                                <span>ÁÆ°ÁêÜÂëò</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>È´òÁ∫ßËÆæÁΩÆ</label>
                        <div class="form-row">
                            <div class="form-group col-md-4">
                                <label for="chatModeTemperature">Temperature</label>
                                <input type="number" id="chatModeTemperature" min="0" max="2" step="0.1" value="0.7">
                            </div>
                            <div class="form-group col-md-4">
                                <label for="chatModeMaxTokens">ÊúÄÂ§ßTokens</label>
                                <input type="number" id="chatModeMaxTokens" min="100" max="32000" step="100" value="4000">
                            </div>
                            <div class="form-group col-md-4">
                                <label for="chatModeFrequencyPenalty">Frequency Penalty</label>
                                <input type="number" id="chatModeFrequencyPenalty" min="-2" max="2" step="0.1" value="0">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-error" id="chatModeFormError"></div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelChatModeBtn">ÂèñÊ∂à</button>
                <button class="btn btn-primary" id="saveChatModeBtn">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>

    <!-- Áî®Êà∑ÂØπËØùÊ®°ÂºèÊùÉÈôêÁºñËæëÊ®°ÊÄÅÊ°Ü -->
    <div id="userChatModePermissionModalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal small-modal">
            <div class="modal-header">
                <h3>ÁºñËæëÁî®Êà∑ÂØπËØùÊ®°ÂºèÊùÉÈôê</h3>
                <button class="close-modal" id="closeUserChatModePermissionModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Áî®Êà∑: <span id="permissionModalUsername"></span></label>
                </div>
                <div class="form-group">
                    <label>ÂØπËØùÊ®°Âºè: <span id="permissionModalChatModeName"></span></label>
                </div>
                <div class="form-group">
                    <label for="permissionStatus">ÊùÉÈôêÁä∂ÊÄÅ</label>
                    <select id="permissionStatus" class="form-control">
                        <option value="allow">ÂÖÅËÆ∏</option>
                        <option value="deny">Á¶ÅÊ≠¢</option>
                    </select>
                </div>
                <input type="hidden" id="permissionUserId">
                <input type="hidden" id="permissionChatModeId">
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelPermissionBtn">ÂèñÊ∂à</button>
                <button class="btn btn-primary" id="savePermissionBtn">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>

    <!-- APIÊèê‰æõÂïÜÁÆ°ÁêÜÊ®°ÊÄÅÊ°Ü -->
    <div id="apiProviderModalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3 id="apiProviderModalTitle">APIÊèê‰æõÂïÜÁÆ°ÁêÜ</h3>
                <button class="close-modal" id="closeApiProviderModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="apiProviderForm" class="compact-form">
                    <input type="hidden" id="apiProviderId">
                    
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="apiProviderName">Êèê‰æõÂïÜÂêçÁß∞</label>
                            <input type="text" id="apiProviderName" required placeholder="Â¶ÇOpenAI„ÄÅAnthropic">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="apiProviderStatus">Áä∂ÊÄÅ</label>
                            <select id="apiProviderStatus">
                                <option value="active">ÂêØÁî®</option>
                                <option value="inactive">Á¶ÅÁî®</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="apiEndpoint">APIÁ´ØÁÇπ</label>
                        <input type="text" id="apiEndpoint" placeholder="https://api.openai.com/v1">
                    </div>
                    
                    <div class="form-group">
                        <label for="defaultApiKey">ÈªòËÆ§APIÂØÜÈí•</label>
                        <input type="password" id="defaultApiKey" placeholder="ÈªòËÆ§APIÂØÜÈí•">
                        <small class="form-text text-muted">Ê≠§ÂØÜÈí•Â∞ÜÁî®‰∫éÊ≤°ÊúâÂçïÁã¨ÈÖçÁΩÆÂØÜÈí•ÁöÑÁî®Êà∑</small>
                    </div>
                    
                    <div class="form-group">
                        <label>ÊîØÊåÅÁöÑÊ®°Âûã</label>
                        <div id="supportedModels">
                            <div class="model-item">
                                <input type="text" placeholder="Ê®°ÂûãÂêçÁß∞" class="model-name">
                                <button type="button" class="btn-icon remove-model">√ó</button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-sm btn-outline" id="addModelBtn">
                            <span>+ Ê∑ªÂä†Ê®°Âûã</span>
                        </button>
                    </div>

                    <div class="form-error" id="apiProviderFormError"></div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelApiProviderBtn">ÂèñÊ∂à</button>
                <button class="btn btn-primary" id="saveApiProviderBtn">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>
    
    <!-- Áî®Êà∑APIÂØÜÈí•ÁÆ°ÁêÜÊ®°ÊÄÅÊ°Ü -->
    <div id="userApiKeyModalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>Áî®Êà∑APIÂØÜÈí•ÈÖçÁΩÆ</h3>
                <button class="close-modal" id="closeUserApiKeyModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Áî®Êà∑: <span id="apiKeyModalUsername"></span></label>
                </div>
                
                <div class="form-group">
                    <label for="useDefaultApiKeys">APIÂØÜÈí•ÈÖçÁΩÆÊñπÂºè</label>
                    <select id="useDefaultApiKeys" class="form-control">
                        <option value="default">‰ΩøÁî®Á≥ªÁªüÈªòËÆ§ÂØÜÈí•</option>
                        <option value="custom">‰ΩøÁî®Ëá™ÂÆö‰πâÂØÜÈí•</option>
                    </select>
                </div>
                
                <div id="customApiKeysContainer" style="display: none;">
                    <div id="apiKeysList">
                        <!-- Âä®ÊÄÅÁîüÊàêÁöÑAPIÂØÜÈí•ËæìÂÖ•Ê°ÜÂ∞ÜÊòæÁ§∫Âú®ËøôÈáå -->
                    </div>
                    
                    <template id="apiKeyItemTemplate">
                        <div class="api-key-item">
                            <div class="form-row">
                                <div class="form-group col-md-4">
                                    <label>Êèê‰æõÂïÜ</label>
                                    <select class="provider-select form-control"></select>
                                </div>
                                <div class="form-group col-md-8">
                                    <label>APIÂØÜÈí•</label>
                                    <div class="input-group">
                                        <input type="password" class="api-key-input form-control">
                                        <button type="button" class="btn btn-icon toggle-password">üëÅÔ∏è</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </template>
                    
                    <button type="button" class="btn btn-sm btn-outline" id="addApiKeyBtn">
                        <span>+ Ê∑ªÂä†APIÂØÜÈí•</span>
                    </button>
                </div>
                
                <input type="hidden" id="apiKeyUserId">
                <div class="form-error" id="userApiKeyFormError"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelUserApiKeyBtn">ÂèñÊ∂à</button>
                <button class="btn btn-primary" id="saveUserApiKeyBtn">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>

    <!-- ÂºïÂÖ•ËÑöÊú¨ -->
    <script src="js/theme.js?v=1.3"></script>
    <script src="js/backend-api.js?v=1.0"></script>
    <!-- Êú¨Âú∞ÂõûÈÄÄÊñπÊ°à - Á°Æ‰øùChart.jsÂØπË±°Â≠òÂú® -->
    <script>
        // Ê£ÄÊü•ChartÂØπË±°ÊòØÂê¶Â∑≤Âä†ËΩΩ
        window.addEventListener('load', function() {
            if (typeof Chart === 'undefined') {
                console.error('Chart.jsÂ∫ìÂä†ËΩΩÂ§±Ë¥•ÔºåÂ∞ùËØï‰ΩøÁî®Êú¨Âú∞ÊñπÊ°à');
                // ÊòæÁ§∫ÈîôËØØ‰ø°ÊÅØÂú®ÂõæË°®ÂÆπÂô®‰∏≠
                const chartContainers = document.querySelectorAll('.chart');
                chartContainers.forEach(container => {
                    container.innerHTML = '<div class="placeholder-chart"><p>ÂõæË°®Â∫ìÂä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•</p></div>';
                });
            } else {
                console.log('Chart.jsÂ∫ìÂä†ËΩΩÊàêÂäüÔºåÁâàÊú¨:', Chart.version);
            }
        });
    </script>
    <script src="js/admin.js?v=1.0"></script>
</body>
</html> 